name: Image Variant Manifest
on:
    #push:
    workflow_dispatch:
jobs:
    base:
        uses: lsc-sde/lsc-sde/.github/workflows/docker-build.yaml@mph/integrate-omop   #just call docker-build.yaml
        with:
            imageName: datascience-jupyter-omop
            platforms: '[ "amd64" ]'
            tag: 'v1'
            tagPrefix: base
            buildArgs: '[{
                            "VARIANT": "base",
                            "VERSION": "v1",
                            "PLATFORM": "amd64"
                        }]'

        secrets: inherit
    # darwin:
    #     uses: lsc-sde/lsc-sde/.github/workflows/docker-release.yaml@mph/integrate-omop
    #     with:
    #         imageName: datascience-jupyter-omop
    #         directory: docker/datascience-jupyter-omop
    #         platforms: '[ "amd64" ]'
    #         tagPrefix: darwin
    #         buildArgs: '[{
    #                         "VARIANT": "darwin",
    #                         "VERSION": "v1.4.0",
    #                         "PLATFORM": "amd64"
    #                     }]'
    #     secrets: inherit
     
    # base:
    #     uses: ./.github/workflows/build-and-push.yaml   #just call docker-build.yaml
    #     with:
    #         variant: base
    #         version: '["v1"]'
    #     secrets: inherit
    # hades:
    #     uses: ./.github/workflows/build-and-push.yaml
    #     with:
    #         variant: hades
    #         version: '["v1.14.0"]'
    #     needs: base "v1.13.1"
    #     secrets: inherit
    # darwin:
    #     uses: ./.github/workflows/build-and-push.yaml
    #     with:
    #         variant: darwin
    #         version: '["v1.4.0"]' #"v1.3.1"

    #     needs: base
    #     secrets: inherit
    # latest:
    #     uses: ./.github/workflows/build-and-push.yaml
    #     with:
    #         variant: all
    #         version: '["latest"]'
    #     needs: base
    #     secrets: inherit